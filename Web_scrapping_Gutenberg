import urllib
from urllib import request
from urllib.parse import quote
from bs4 import BeautifulSoup


target_page="https://www.farsnews.ir/economy"
resp = urllib.request.urlopen(target_page)
soup = BeautifulSoup(resp, 'html.parser')
site="https://www.farsnews.ir"

list_1=[]

for link in soup.find_all('a'):
    list_1.append(link.get('href'))
 
import os
from datetime import date 

  url=site + quote(list_1[-29])

 for item in list:
    try:
    part_1="farsnews.ir"
    url=site + quote(item)
    resp2=urllib.request.urlopen(url)
    soup2 = BeautifulSoup(resp2, 'html.parser')
    soup3=soup2.find_all('p')
    dataText=str(soup3)
    title=soup2.find('title')
    today = date.today()
    dirName="/Users/andrewakhlaghi/Desktop/Fars/{}".format(today)
    os.mkdir(dirName)
    name=dirName+"/{}".format(title)
    doc = open(name, 'w+')
    doc2 = open('all.txt', 'w+')
    doc.write(dataText)
    doc.close()









